
<!-- 1.00 Parking Project Code
Jocelyn Lorrey & Deanna Delgado
Objective: interact w/database (in this case, display data in an html page)
 -->
<!DOCTYPE html>
<html>
<!-- <head>

<style> 
body {
	animation: colorchange 20s infinite;
}
@keyframes colorchange
{
	0%   {background: maroon;}
	10%  {background: red;}
	20%  {background: orange;}
	30%  {background: yellow;}
	40% {background: green;}
	50%   {background: teal;}
	60%  {background: blue;}
	70%  {background: aqua;}
	80%  {background: fuchsia;}
	90%  {background: purple;}
	100% {background: maroon;}
}
</style>

</head> -->

<body>

<div id="Acessing Data">
<h1>Parking Problems - Team TBD</h1>
<h2>Accessing Parking Data</h2>
<button type="button" onclick="loadDoc1()">Display 2015 Data</button>
<button type="button" onclick="loadDoc2()">Display 2017 Data</button>
</div>

<script>

function loadDoc1() {
	console.log("Button 1 clicked");
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			document.getElementById("Acessing Data").innerHTML = this.responseText;
		}
	};
	xhttp.open("GET", "https://data.austintexas.gov/resource/t6bu-kybx.json", true);
	xhttp.send();
}

function loadDoc2() {
	console.log("Button 2 clicked");
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			document.getElementById("Acessing Data").innerHTML = this.responseText;
		}
	};
	xhttp.open("GET", "https://data.austintexas.gov/resource/y5cf-fbh5.json", true);
	xhttp.send();
}
</script>

<br>
<br>

<div id="Parsing Data">
<h2>Finding Parking Violations</h2>
<button type="button" onclick="loadDoc3()">Display 2015 Parking Violations</button>
<button type="button" onclick="loadDoc4()">Display 2017 Parking Violations</button>
</div>

<script>
function loadDoc3() {
	console.log("Button 3 clicked");
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			// document.getElementById("Acessing Data").innerHTML = this.responseText;
			var austin15_data = [this.responseText];
			
			// console.log(austin15_data);
			console.log(typeof austin15_data);
			console.log(austin15_data.length);
			
			
			// var dummy_data = [{"offense_case_type": "PK", "date": "Jan 2017"},
			// 				  {"offense_case_type": "TR", "date": "April 2017"},
			// 				  {"offense_case_type": "PK", "date": "Nov 2017"}];
			var i = 0;
			[austin15_data].forEach(function(violation) {
				console.log("Violation "+i+": "+violation);
				i++;

			});
			console.log(i);
			// austin15_data.forEach(function(violation){
			// 	if (violation.offense_case_type==="PK"){
			// 		console.log(violation);
			// 	}
			// });
		}
	};
	xhttp.open("GET", "https://data.austintexas.gov/resource/t6bu-kybx.json", true);
	xhttp.send();
}

function loadDoc4() {
	console.log("Button 4 clicked");
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			// document.getElementById("Acessing Data").innerHTML = this.responseText;
			var austin17_data = this.responseText;
			console.log(austin17_data);


		}
	};
	xhttp.open("GET", "https://data.austintexas.gov/resource/y5cf-fbh5.json", true);
	xhttp.send();
}
</script>

</body>
</html>

<!-- Data Fields:
agency (STR) case closed (Y/N), construction zone (Y/N), 
offense_case_type, offense_charge_description, offense_cross_street,
offense_date, offense_street_name, offense_time, officer code -->

<!-- offense_case_type = "PK" (Parking), "TR" (Traffic), + others
offense_charge_desciption = "PARKING - EXPIRED METER"
							"TOW AWAY ZONE NO PARKING"
							"Parking - Pay Station Receipt Not Displayed"
							"Parking - Pay Station Receipt Expired" -->
<!-- 			
Sources/Tutorials:
Background Animation: based on https://www.w3schools.com/css/css3_animations.asp 